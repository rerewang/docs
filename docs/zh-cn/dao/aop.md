# AOP设计思想
## 什么是AOP
AOP，即面向切面编程，是OOP面向对象编程的补充，OOP引入封装、继承和多态建立对象层次结构；而AOP引入切面建立对象的水平结构。
通过预编译方式或运行期动态代理实现程序功能的统一维护

AOP把系统分为 核心关注点 和 横切关注点，进行解耦分离。业务主流程是核心关注点；辅助功能流程是横切关注点。
特点是横切关注点散布在各个核心关注点的层次结构中，例如权限认证、日志、事务处理。

## 业务拆分举例
AOP是一个横向关系，以横向切面技术，进行模块解耦，把功能封装成重用模块 -- 切面，如：
订单核心业务S是一个球，日志功能N也是一个球，AOP思想把两个球以切面并排，从S获取内部消息(参数),传到N中，N代理执行通用代码，实现模块解耦。

## AOP实现技术分类
1.动态代理
	- 采用动态代理技术，截取消息，代理执行取代原有核心关注点执行
2.静态织入
	- 采用静态织入的方式，引入特定的语法创建切面，让编译器可以在编译期间织入有关切面的通用代码

## 增强时机
|增强时机|应用场景|备注|
|-----|-----|-----|
|前置增强|权限控制、记录调用日志|在方法执行之前增强|
|后置增强|统计分析结果数据|在方法正常执行完成后增强(中间无异常)|
|异常增强|通过日志记录方法异常信息|在方法抛出异常退出时增强|
|最终增强|释放资源|相当于在finally里执行|
|环绕增强|缓存、性能日志、权限、事务管理||

## 应用场景
- 参数校验、日志、无侵入埋点、安全控制、性能统计、事务处理、异常处理、缓存、无侵入监控、资源池、连接池管理等

## AOP实例
- laravel 中间件
- 



# AOP vs DI/Chained Filters
AOP是编程范式，与OOP同一个层级的，而DI/Chained Filters等只能算是模式
- DI DI只是解决依赖对象的构造松耦合
- Chained Filters  无法做到细粒度的AOP，针对的是Request Process
